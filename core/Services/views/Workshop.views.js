const express = require("express");
var router = express.Router();
var workshopRoutes = require("../routes/Workshop.routes");
var workshopControllerRoutes = require("../controllers/routes/ServiceController.routes");


router.get(workshopRoutes.GetWorkshops,async(req,res)=>{
    var upcomingWorkshop = await workshopControllerRoutes.Workshop.findAll({past:false}).catch(ex=>{
    })
    var pastWorkshop = await workshopControllerRoutes.Workshop.findAll({past:true}).catch(ex=>{
    })
    
    var types = await workshopControllerRoutes.Workshop.findAllTypesAndTopics().catch(ex=>{
    })
    return res.send({"upcoming":upcomingWorkshop,"past":pastWorkshop,"types":types})
})


router.get(workshopRoutes.GetWorkshop,async(req,res)=>{
    var condition;
    if(req.query.id){
        condition={id:req.query.id}
    }
    else{
        
    }
    var webinar = await workshopControllerRoutes.Workshop.findOne(condition).catch(ex=>{
        console.log(ex)
    })
    res.send(webinar)
})

module.exports = router;