const express = require("express");
var router = express.Router();
var webinarRoutes = require("../routes/Webinar.routes");
var webinarControllerRoutes = require("../controllers/routes/ServiceController.routes");


router.get(webinarRoutes.GetWebinars,async(req,res)=>{
    var upcomingWebinar = await webinarControllerRoutes.Webinar.findAll({past:false}).catch(ex=>{
    })
    var pastWebinar = await webinarControllerRoutes.Webinar.findAll({past:true}).catch(ex=>{
    })
    var topic = await webinarControllerRoutes.Webinar.findAllTopics().catch(ex=>{
    })
    return res.send({"upcoming":upcomingWebinar,"past":pastWebinar,"topic":topic})
})

router.get(webinarRoutes.GetWebinar,async(req,res)=>{
    var condition;
    if(req.query.id){
        condition={id:req.query.id}
    }
    else{
        
    }
    var webinar = await webinarControllerRoutes.Webinar.findOne(condition).catch(ex=>{
        console.log(ex)
    })
    res.send(webinar)
})

module.exports = router;