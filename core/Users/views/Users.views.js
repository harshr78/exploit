const express = require("express");
var router = express.Router();
var otherRoutes = require("../routes/Users.routes");
var userController = require("../controllers/Users.controllers");
var generateToken = require("../../../utils/generateToken");
router.post(otherRoutes.Login,async(req,res)=>{
    var msg;
    var token;
    var user = await userController.authenticateUserWithphone(req.body).catch(()=>{
        msg="please check your creds"
    });
    if(user){
        msg = "login successfull"
        token  = await generateToken.generateToken({data:req.body.phone})
        
    console.log(token);
    }
    else{
        msg="please check your creds"
    }
    return res.send({"message":msg,"token":token});
})


module.exports = router;