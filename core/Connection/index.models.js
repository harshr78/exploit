// const routes = require(__dirname+"/core/routes/routes.js")

const dbConfig = require("../../utils/config/db.config");
const Sequelize = require("sequelize");



const sequelize = new Sequelize(dbConfig.DB, dbConfig.USER, dbConfig.PASSWORD, {
    host: dbConfig.HOST,
    dialect: dbConfig.DIALECT,
    port: dbConfig.PORT,
    pool: {
      max: dbConfig.pool.max,
      min: dbConfig.pool.min,
      acquire: dbConfig.pool.acquire,
      idle: dbConfig.pool.idle
    }
  });
// const sequelize = new Sequelize({
//   dialect: dbConfig.DIALECT,
//   storage: dbConfig.STORAGE
// })
const db = {};
db.User = require("../Users/models/Users.models")(sequelize,Sequelize);
db.sectiontype = require("../Services/models/SectionType.models")(sequelize,Sequelize);
db.sectioncategory = require("../Services/models/SectionCategory.models")(sequelize,Sequelize);
db.sectionsubcategory = require("../Services/models/SectionSubCategory.models")(sequelize,Sequelize);
db.service = require("../Services/models/Service.models")(sequelize,Sequelize);
db.curriculum = require("../Services/models/Curriculum.models")(sequelize,Sequelize);
db.curriculumModule = require("../Services/models/CurriculumModule.models")(sequelize,Sequelize);
db.curriculumSubModule = require("../Services/models/CurriculumSubModule.models")(sequelize,Sequelize);
db.Review = require("../Services/models/Review.models")(sequelize,Sequelize);
db.Instructor = require("../Services/models/Insurtuctor.models")(sequelize,Sequelize);
db.Sequelize = Sequelize;
db.sequelize = sequelize;

Object.keys(db).forEach(ModelName=>{
  if(db[ModelName].associate){
    db[ModelName].associate(db);
  }
}
)


module.exports = db;