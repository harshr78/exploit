import * as React from "react";
import "./Assets/TrainingForm.css"
import { Button } from "@mui/material";
import TextField from '@mui/material/TextField';
import Autocomplete from '@mui/material/Autocomplete';
import AllCoursesApi from "../../Core/api/services/AllCourses";
import BookDemo from "../../Core/api/services/BookDemo";

const TrainingForm = () => {

    const [allCourses , setAllCourses] = React.useState([]);
    const [allSubCategory , setAllSubCategory] = React.useState([]);
    const [isLoading , setIsLoading] = React.useState(false);
    React.useEffect(()=>{
        AllCoursesApi(setAllCourses , setAllSubCategory, setIsLoading);
    },[])
    const AllCourses = allCourses.map((data)=>{
        return data.title;
    })
    const handleSubmit = (e)=>{
        e.preventDefault();
        console.log(e)
        var data = {
            name:e.target.name.value,
            phone:e.target.phone.value,
            email:e.target.email.value,
            service:e.target.service.value,
        }
        BookDemo(data);
    }
    return (
        <section>
            <form className="form" onSubmit={handleSubmit}>
                <div className="form__item">
                    <input type="text" required="required" name="name" id="name" /><span className="form__item-title">Name</span>
                </div>
                <div className="form__item">
                    <input type="text" required="required" name="phone"  id="phone"/><span className="form__item-title">Mobile</span>
                </div>
                <div className="form__item">
                    <input type="text" required="required" name="email" id="email" /><span className="form__item-title">Email</span>
                </div>
                <div className="form__item-dropdown">
                <Autocomplete
                name="service"
                id="service"
                    disablePortal
                    options={AllCourses}
                    // sx={{ width: 300 }}
                    renderInput={(params) => <TextField required {...params} label="Select Course" />}
                />
                </div>
                <Button
                    variant="contained"
                    color="primary"
                    type="submit"
                    className="techvanto-know-more-button techvanto-interview-button"
                >
                    Submit
                </Button>
            </form>

        </section>
    )
}


export default TrainingForm;