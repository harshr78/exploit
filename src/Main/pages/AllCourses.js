import * as React from 'react';
import ResponsiveGrid from '../components/Grid';
import Container from '@mui/material/Container';
import ContentHeaderImage from "../components/ContentHeaderImage";
import CourseFilterList from '../widgets/CourseFilterList';
import AllServicesApi from '../../Core/api/services/AllServices';
import TechvantoLoader from "../loader/Loading";
import { useParams } from 'react-router-dom';

const AllCourses = () => {
    const [courses,setCourses] = React.useState([]);
    const [subCategory,setCategory] = React.useState([]);
    const [loading,setLoading] = React.useState(true);
    let{SubCategory,subCategory_id} = useParams();
    const [subCategoryId,setSubCategoryId] = React.useState("");
    const [subCategoryName,setSubCategory] = React.useState("");
    React.useEffect(()=>{
        AllServicesApi(subCategory_id,setCourses,setCategory,setLoading);
        setSubCategory(SubCategory);
    },[subCategory_id])
    console.log(courses);
    return (
        <React.Fragment>
            <ContentHeaderImage></ContentHeaderImage>
            {loading? <TechvantoLoader></TechvantoLoader> :
            <div>
            
            <Container maxWidth="md">
                <h1 className="text-muted">
                    {subCategoryName}.
                </h1>
                <hr />
                <div className="technovanto-course-content">

                    <div className="technovanto-course-content-left">

                        <CourseFilterList subCategory={subCategory} ></CourseFilterList>

                    </div>
                    <div className="technovanto-course-content-right">
                            <h6 className="technovanto-course-content-category">{subCategoryName}</h6>
                            <ResponsiveGrid course={courses}></ResponsiveGrid>
                    </div>
                </div>
            </Container>
            </div>
            }
        </React.Fragment>
    )
}

export default AllCourses;